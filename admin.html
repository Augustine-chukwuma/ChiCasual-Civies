import React, { useState } from 'react';
import { View, Text, StyleSheet, SafeAreaView, FlatList } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { TouchableOpacity } from 'react-native-gesture-handler';

const categories = [
  { label: 'Shoe', icon: 'ios-walk' },
  { label: 'Senators', icon: 'ios-people' },
  { label: 'Caps', icon: 'ios-hat' },
  { label: 'Shirts', icon: 'ios-shirt' },
  { label: 'Shorts', icon: 'ios-cut' },
  { label: 'Trousers', icon: 'ios-body' }
];

const mockProducts = [
  { id: '1', name: 'Leather Shoe', category: 'Shoe' },
  { id: '2', name: 'Senator Outfit', category: 'Senators' },
  { id: '3', name: 'Baseball Cap', category: 'Caps' },
  { id: '4', name: 'Casual Shirt', category: 'Shirts' },
  { id: '5', name: 'Denim Shorts', category: 'Shorts' },
  { id: '6', name: 'Slim Fit Trousers', category: 'Trousers' },
  { id: '7', name: 'Formal Shirt', category: 'Shirts' },
  { id: '8', name: 'Jogger Trousers', category: 'Trousers' }
];

const App = () => {
  const [selectedCategory, setSelectedCategory] = useState('None');

  const handleCategorySelect = (category) => {
    console.log(`Selected: ${category}`);
    setSelectedCategory(category);
  };

  const filteredProducts = selectedCategory === 'None'
    ? []
    : mockProducts.filter(p => p.category === selectedCategory);

  return (
    <SafeAreaView style={styles.safe}> 
      <View style={styles.container}>
        <Text style={styles.title}>ChiCasual Admin Panel</Text>
        <Text style={styles.subtitle}>Selected Category: {selectedCategory}</Text>

        {selectedCategory !== 'None' && (
          <FlatList
            data={filteredProducts}
            keyExtractor={item => item.id}
            renderItem={({ item }) => (
              <View style={styles.productItem}>
                <Text style={styles.productName}>{item.name}</Text>
                <Text style={styles.productCategory}>Category: {item.category}</Text>
              </View>
            )}
            ListEmptyComponent={<Text style={styles.emptyText}>No products found.</Text>}
          />
        )}
      </View>

      <BottomAppBar onCategorySelect={handleCategorySelect} />
    </SafeAreaView>
  );
};

const BottomAppBar = ({ onCategorySelect }) => {
  return (
    <View style={styles.appBar}>
      {categories.map((item, index) => (
        <TouchableOpacity
          key={index}
          style={styles.button}
          onPress={() => onCategorySelect(item.label)}
        >
          <Ionicons
            name={item.icon in Ionicons.glyphMap ? item.icon : 'apps'}
            size={22}
            color="white"
          />
          <Text style={styles.buttonText}>{item.label}</Text>
        </TouchableOpacity>
      ))}
    </View>
  );
};

const styles = StyleSheet.create({
  safe: {
    flex: 1,
    backgroundColor: '#f4f4f4'
  },
  container: {
    flex: 1,
    padding: 20,
    paddingBottom: 80
  },
  title: {
    fontSize: 24,
    color: '#001f3f',
    marginBottom: 10,
    fontWeight: 'bold'
  },
  subtitle: {
    fontSize: 16,
    color: '#444',
    marginBottom: 10
  },
  productItem: {
    backgroundColor: '#fff',
    padding: 15,
    borderRadius: 8,
    marginBottom: 10,
    borderWidth: 1,
    borderColor: '#ddd'
  },
  productName: {
    fontSize: 16,
    fontWeight: 'bold'
  },
  productCategory: {
    color: '#777'
  },
  emptyText: {
    textAlign: 'center',
    marginTop: 20,
    color: '#aaa'
  },
  appBar: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    backgroundColor: '#001f3f',
    paddingVertical: 10,
    borderTopLeftRadius: 15,
    borderTopRightRadius: 15,
    position: 'absolute',
    bottom: 0,
    width: '100%'
  },
  button: {
    alignItems: 'center'
  },
  buttonText: {
    color: 'white',
    fontSize: 12,
    marginTop: 4
  }
});

export default App;
